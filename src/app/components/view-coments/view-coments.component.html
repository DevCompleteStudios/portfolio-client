<main class="p-6 mt-28 md:p-8">
  <h2 appVisible (visible)="onViewComents()" class="text-4xl font-bold text-center mb-8 text-white/90 tracking-tight">
    What Our Customers Say
  </h2>

  <div class="flex flex-col my-4 text-white">
    <h3 class="text-center text-blue-500 font-bold mb-8 text-3xl">Add Comment</h3>

    <form class="p-3 gap-3 flex flex-col max-w-lg w-full mx-auto">
      <div class="flex flex-col gap-1 w-full">
        <input type="text" placeholder="Your name" class="border bg-black rounded-md p-2 focus:outline-none focus:border-blue-500">
      </div>

      <div class="flex flex-col gap-1 w-full">
        <input type="email" placeholder="Your email" class="border bg-black rounded-md p-2 focus:outline-none focus:border-blue-500">
      </div>

      <div class="flex flex-col gap-1 w-full">
        <textarea
          placeholder="Coment"
          class="border bg-black rounded-md p-2 focus:outline-none focus:border-blue-500"
          name="message" id="message"
        ></textarea>
      </div>

      <div class="flex flex-row justify-center gap-1 w-full">
        <input type="radio" name="rating" value="1" id="star1" class="hidden">
        <label for="star1" class="text-yellow-500 cursor-pointer">⭐</label>

        <input type="radio" name="rating" value="2" id="star2" class="hidden">

        <label for="star2" class="text-yellow-500 cursor-pointer">⭐</label>
        <input type="radio" name="rating" value="3" id="star3" class="hidden">

        <label for="star3" class="text-yellow-500 cursor-pointer">⭐</label>
        <input type="radio" name="rating" value="4" id="star4" class="hidden">

        <label for="star4" class="text-yellow-500 cursor-pointer">⭐</label>
        <input type="radio" name="rating" value="5" id="star5" class="hidden">

        <label for="star5" class="text-yellow-500 cursor-pointer">⭐</label>
      </div>

      <button type="submit" class="w-full bg-blue-500 text-white py-2 rounded-md font-semibold hover:bg-blue-600">
        Submit
      </button>
    </form>
  </div>


  @if (err) {
    <app-show-errors [err]="err"/>
  }

  @if (!isLoading()) {
    @if (coments.length > 0) {
      <ul class="max-w-3xl mx-auto space-y-6">
        @for (coment of coments; track $index) {
          <li class="bg-zinc-900/50 backdrop-blur-sm p-6 rounded-xl border border-zinc-800 hover:border-zinc-700 transition-all">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-3">
                <div>
                  <h3 class="text-lg font-medium text-white/90">
                    {{coment.username}}
                  </h3>
                  <div class="flex items-center gap-1 text-amber-400">
                    @for (star of getStars; track $index) {
                      @if (checkStar(coment, $index)) {
                        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-5 h-5 inline" viewBox="0 0 24 24">
                          <path d="M12 .587l3.668 7.428 8.2 1.191-5.932 5.744 1.4 8.162L12 18.896l-7.336 3.867 1.4-8.162L.268 9.206l8.2-1.191L12 .587z"/>
                        </svg>
                      }@else {
                        <svg xmlns="http://www.w3.org/2000/svg" fill="gray" class="w-5 h-5 inline" viewBox="0 0 24 24">
                          <path d="M12 .587l3.668 7.428 8.2 1.191-5.932 5.744 1.4 8.162L12 18.896l-7.336 3.867 1.4-8.162L.268 9.206l8.2-1.191L12 .587z"/>
                        </svg>
                      }
                    }
                  </div>
                </div>
              </div>
              <span class="text-sm text-zinc-400">
                {{ formatDate(coment.date) }}
              </span>
            </div>
            <p class="mt-4 text-zinc-300 leading-relaxed">
              {{coment.content}}
            </p>
          </li>
        }
      </ul>
    }@else {
      <h2 class="text-center text-indigo-400 my-20 text-2xl">Add a comment saying what you think about us</h2>
    }
  }@else {
    <app-loading/>
  }
</main>
